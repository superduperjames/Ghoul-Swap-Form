<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ghoul Swap Gift & Coffee Order</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: url('https://res.cloudinary.com/eventmobi/image/upload/v1761237992/_James%20Assets/.test%20app%20assets/Abstract%20Backgrounds/Haunted%20Background/2151153754.jpg') no-repeat center center fixed;
    background-size: cover;
    color: white;
    margin: 0;
    padding: 0;
    text-align: center;
  }

  .container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 30px;
    margin: 40px auto;
    width: 90%;
    max-width: 1200px;
  }

  .form-box {
    background: rgba(0, 0, 0, 0.85);
    padding: 30px;
    border-radius: 15px;
    width: 45%;
    min-width: 320px;
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
  }

  h1, h2 {
    margin-bottom: 15px;
  }

  p {
    font-size: 14px;
    margin-bottom: 20px;
  }

  label {
    display: block;
    text-align: left;
    margin-bottom: 6px;
    font-size: 12pt;
    color: white;
  }

  input, textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 15px;
    border: none;
    border-radius: 8px;
    font-size: 14px;
  }

  textarea {
    resize: vertical;
    min-height: 80px;
  }

  button {
    background-color: #8b0000;
    color: white;
    border: none;
    padding: 12px 20px;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
  }

  button:hover {
    background-color: #b30000;
  }

  /* Admin button */
  #adminBtn {
    position: fixed;
    top: 10px;
    right: 10px;
    font-size: 12px;
    background: rgba(255,255,255,0.2);
    color: white;
    border: 1px solid white;
    padding: 5px 10px;
    border-radius: 5px;
    cursor: pointer;
  }

  /* Admin panel */
  #adminPanel {
    display: none;
    background: rgba(0, 0, 0, 0.9);
    padding: 20px;
    border-radius: 10px;
    width: 80%;
    margin: 30px auto;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    color: white;
  }

  th, td {
    border: 1px solid #444;
    padding: 8px;
    text-align: left;
  }

  th {
    background: #222;
  }

  /* Starbucks Modal */
  .modal {
    display: none;
    position: fixed;
    z-index: 1000;
    padding-top: 80px;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.8);
  }

  .modal-content {
    background-color: #111;
    margin: auto;
    padding: 20px;
    border: 1px solid #444;
    width: 80%;
    max-width: 800px;
    height: 80vh;
    overflow: hidden;
    border-radius: 10px;
  }

  .modal iframe {
    width: 100%;
    height: 100%;
    border: none;
    border-radius: 10px;
  }

  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
  }

  .close:hover {
    color: white;
  }

  @media (max-width: 768px) {
    .form-box {
      width: 90%;
    }
  }
</style>
</head>
<body>

<!-- Admin Login Button -->
<button id="adminBtn">Admin</button>

<div class="container">
  <!-- Ghoul Swap Form -->
  <div class="form-box">
    <h1>üéÉ Ghoul Swap Gift Entry üëª</h1>
    <p>Enter your details below to join the exchange.<br>
    Beware ‚Äî only those who complete this form will receive a gift in return!</p>

    <form id="giftForm">
      <label for="realName">Real Name (optional for Admin tracking)</label>
      <input type="text" id="realName" name="realName">

      <label for="codeName">Code Name *</label>
      <input type="text" id="codeName" name="codeName" required>

      <label for="gender">Gender *</label>
      <input type="text" id="gender" name="gender" required>

      <label>Wish Item 1</label>
      <input type="text" id="wish1" name="wish1">

      <label>Wish Item 2</label>
      <input type="text" id="wish2" name="wish2">

      <label>Wish Item 3</label>
      <input type="text" id="wish3" name="wish3">

      <button type="submit">Submit Gift Entry</button>
    </form>
  </div>

  <!-- Coffee Order Form -->
  <div class="form-box">
    <h2>‚òï Coffee Order Form</h2>
    <p>Put your favorite drink here! Click <b>‚ÄúSee Menu‚Äù</b> if you need ideas.</p>

    <form id="coffeeForm">
      <label for="coffee">Starbucks Coffee Order</label>
      <div style="display: flex; align-items: center; gap: 10px;">
        <textarea id="coffee" name="coffee" placeholder="Write your coffee order here..."></textarea>
        <button type="button" id="menuBtn" style="padding:8px 14px; background:#444;">See Menu</button>
      </div>

      <button type="submit">Submit Coffee Order</button>
    </form>
  </div>
</div>

<!-- Starbucks Menu Modal -->
<div id="menuModal" class="modal">
  <div class="modal-content">
    <span class="close" id="closeMenu">&times;</span>
    <iframe src="https://www.starbucks.ph/menu"></iframe>
  </div>
</div>

<!-- Admin Panel -->
<div id="adminPanel">
  <h2>Admin Panel</h2>
  <p>Download all entries as Excel or clear all data.</p>
  <button onclick="downloadExcel()">Download Entries</button>
  <button onclick="clearEntries()">Clear Entries</button>
  <table id="entriesTable">
    <thead>
      <tr>
        <th>Real Name</th>
        <th>Code Name</th>
        <th>Gender</th>
        <th>Wish 1</th>
        <th>Wish 2</th>
        <th>Wish 3</th>
        <th>Coffee Order</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<script>
  const giftForm = document.getElementById('giftForm');
  const coffeeForm = document.getElementById('coffeeForm');
  const adminBtn = document.getElementById('adminBtn');
  const adminPanel = document.getElementById('adminPanel');

  // Starbucks modal logic
  const menuBtn = document.getElementById('menuBtn');
  const menuModal = document.getElementById('menuModal');
  const closeMenu = document.getElementById('closeMenu');

  menuBtn.onclick = () => menuModal.style.display = "block";
  closeMenu.onclick = () => menuModal.style.display = "none";
  window.onclick = (event) => {
    if (event.target == menuModal) menuModal.style.display = "none";
  };

  // Combine form submissions into one entry list
  function getEntries() {
    return JSON.parse(localStorage.getItem('giftEntries')) || [];
  }

  function saveEntries(entries) {
    localStorage.setItem('giftEntries', JSON.stringify(entries));
  }

  giftForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const entries = getEntries();
    const entry = {
      realName: giftForm.realName.value,
      codeName: giftForm.codeName.value,
      gender: giftForm.gender.value,
      wish1: giftForm.wish1.value,
      wish2: giftForm.wish2.value,
      wish3: giftForm.wish3.value,
      coffee: ""
    };
    entries.push(entry);
    saveEntries(entries);
    alert("Gift entry saved!");
    giftForm.reset();
  });

  coffeeForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const entries = getEntries();
    const latestEntry = entries[entries.length - 1];
    if (latestEntry) {
      latestEntry.coffee = coffeeForm.coffee.value;
      saveEntries(entries);
      alert("Coffee order saved!");
      coffeeForm.reset();
    } else {
      alert("Please fill out the Ghoul Swap form first!");
    }
  });

  // Admin login
  adminBtn.addEventListener('click', function() {
    const password = prompt("Enter admin password:");
    if (password === "escape2025") {
      loadEntries();
      adminPanel.style.display = 'block';
    } else {
      alert("Incorrect password!");
    }
  });

  function loadEntries() {
    const entries = getEntries();
    const tableBody = document.querySelector('#entriesTable tbody');
    tableBody.innerHTML = '';
    entries.forEach(entry => {
      const row = document.createElement('tr');
      row.innerHTML = `
        <td>${entry.realName}</td>
        <td>${entry.codeName}</td>
        <td>${entry.gender}</td>
        <td>${entry.wish1}</td>
        <td>${entry.wish2}</td>
        <td>${entry.wish3}</td>
        <td>${entry.coffee}</td>
      `;
      tableBody.appendChild(row);
    });
  }

  function downloadExcel() {
    const entries = getEntries();
    if (entries.length === 0) return alert("No entries to download.");
    let csv = 'Real Name,Code Name,Gender,Wish 1,Wish 2,Wish 3,Coffee Order\n';
    entries.forEach(e => {
      csv += `"${e.realName}","${e.codeName}","${e.gender}","${e.wish1}","${e.wish2}","${e.wish3}","${e.coffee}"\n`;
    });
    const blob = new Blob([csv], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'GhoulSwapEntries.csv';
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
  }

  function clearEntries() {
    if (confirm("Are you sure you want to clear all entries? This cannot be undone.")) {
      localStorage.removeItem('giftEntries');
      loadEntries();
      alert("All entries cleared.");
    }
  }
</script>

</body>
</html>
